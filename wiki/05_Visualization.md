# 05: Basic Visualization

Visualizing diffusion MRI data and the parameter maps derived from models is essential for quality control, analysis, and interpretation. The `diffusemri` library primarily focuses on data processing and model fitting. The results, such as parameter maps or streamlines, are typically saved in standard file formats (e.g., NIFTI for maps, TRK for streamlines). These files can then be visualized using a variety of dedicated neuroimaging software packages.

Commonly used external viewers include:
*   **MRtrix `mrview`**: Excellent for viewing dMRI data, ODFs, and tractography.
*   **FSLeyes**: FSL's viewer, good for general NIfTI viewing and overlays.
*   **3D Slicer**: A versatile platform with powerful visualization capabilities for various data types.
*   **TrackVis**: Specifically designed for visualizing and analyzing tractography data.
*   **Dipy Horizon**: Dipy's command-line tool for advanced 3D visualization of dMRI data and derivatives.

This document outlines basic visualization approaches that can be achieved using common Python tools, as demonstrated in the `examples/` Jupyter notebooks.

## Displaying 2D Slices of Parameter Maps

Parameter maps generated by this library (such as FA, MD, NDI, ODI, GFA etc.) are typically 3D NumPy arrays. These can be easily visualized slice-by-slice using standard Python plotting libraries like Matplotlib, which is shown in many of the example notebooks.

*   **Method:**
    1.  Load or generate a parameter map (e.g., an FA map from DTI fitting). This will be a 3D NumPy array.
    2.  Use Matplotlib's `imshow` function to display a specific slice along a chosen axis (axial, sagittal, or coronal).
*   **Conceptual Python Example (using Matplotlib):**
    ```python
    import numpy as np
    import matplotlib.pyplot as plt

    # Assume 'parameter_map' is a 3D NumPy array (e.g., an FA map)
    # This would typically be loaded from a NIfTI file or be the output of a fitting function.
    
    # Create dummy parameter map for demonstration:
    # map_shape = (64, 64, 32) # X, Y, Z dimensions
    # parameter_map = np.random.rand(map_shape[0], map_shape[1], map_shape[2]).astype(np.float32)
    # parameter_map[28:36, 28:36, 14:18] = 0.8 # Simulate a region of high FA
    
    # slice_index_z = map_shape[2] // 2
    
    # plt.figure(figsize=(6, 6))
    # plt.imshow(parameter_map[:, :, slice_index_z].T, cmap='gray', origin='lower')
    # plt.colorbar(label="Parameter Value")
    # plt.title(f"Axial Slice (Z = {slice_index_z}) of Parameter Map")
    # plt.xlabel("X-axis"); plt.ylabel("Y-axis")
    # plt.show()
    
    print("Conceptual Matplotlib example. See Jupyter notebooks in 'examples/' for runnable code.")
    print("For instance, '09_DTI_Fitting_and_Metrics.ipynb' visualizes FA and MD maps.")
    ```
    The `examples/` directory contains several notebooks (e.g., for DTI, NODDI, other models) that demonstrate how to plot slices of the generated parameter maps.

## Visualizing Tractography Streamlines

Streamlines generated by the tractography module (e.g., `diffusemri.tracking.deterministic.track_deterministic_oudf()`) are typically saved in formats like `.trk`.

*   **Specialized Software:** As mentioned above, tools like MRtrix (`mrview`), TrackVis, Dip√Ω Horizon, or 3D Slicer are best suited for 3D rendering of streamlines, coloring them by orientation or other metrics, filtering, and overlaying them on anatomical images.
*   **Basic Plotting (Conceptual):** The `examples/12_Deterministic_Tractography.ipynb` notebook shows a very basic 2D projection of a few streamlines using Matplotlib, which is mainly for illustrative purposes within the notebook's constraints. For any serious analysis or quality control of tractography results, dedicated 3D viewers are essential.

## Library-Specific GUI

The `diffusemri` library may also contain GUI components (e.g., in the `gui/` directory, such as `DMRIFittingWidget`) for interactive data exploration and visualization of certain model outputs (like DTI or CSD maps). If such features are used, refer to their specific documentation or examples for usage instructions. These are generally built using libraries like PyQt5 and pyqtgraph.

---
This documentation provides a general guide. For specific visualization examples integrated into workflows, please consult the Jupyter notebooks in the `examples/` directory.
